"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[163],{163:function(t,e,n){n.r(e),n.d(e,{default:function(){return D}});var a,r=n(791),c=n(434),s=n(270),o="ContactList_list__csErn",u="ContactList_item__EZYHO",i="ContactList_name__UCkFW",l="ContactList_number__2af8f",d="ContactList_button__7kL4l",m=n(861),f=n(757),p=n.n(f),h=n(690),_=n(243),b=(0,h.hg)("contacts/fetchContacts",function(){var t=(0,m.Z)(p().mark((function t(e,n){var a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.Z.get("/contacts");case 3:return a=t.sent,t.abrupt("return",a.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()),x=(0,h.hg)("contacts/addContact",function(){var t=(0,m.Z)(p().mark((function t(e,n){var a,r,c;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.name,r=e.number,t.prev=1,t.next=4,_.Z.post("/contacts",{name:a,number:r});case 4:return c=t.sent,t.abrupt("return",c.data);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",n.rejectWithValue(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,n){return t.apply(this,arguments)}}()),v=(0,h.hg)("contacts/deleteContact",function(){var t=(0,m.Z)(p().mark((function t(e,n){var a;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.Z.delete("/contacts/".concat(e));case 3:return a=t.sent,t.abrupt("return",a.data);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",n.rejectWithValue(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}()),j=n(184),g=function(){var t=(0,c.I0)(),e=(0,c.v9)((function(t){return t.contacts.contacts})),n=(0,c.v9)((function(t){return t.contacts.filter})),a=e.filter((function(t){return t.name.toLowerCase().includes(n.toLowerCase())||t.number.includes(n)}));return(0,r.useEffect)((function(){t(b())}),[t]),(0,j.jsx)("table",{children:(0,j.jsx)("tbody",{className:o,children:a.map((function(e){var n=e.id,a=e.name,r=e.number;return(0,j.jsxs)("tr",{id:n,className:u,children:[(0,j.jsxs)("td",{className:i,children:[a,":"]}),(0,j.jsx)("td",{className:l,children:r}),(0,j.jsx)("td",{children:(0,j.jsx)("button",{className:d,type:"submit",onClick:function(){return function(e){t(v(e)).then((function(){t(b())})).catch((function(t){console.log("Error: ".concat(t.message))}))}(n)},children:"Delete"})})]},n)}))})})},C=n(439),Z=n(9),y="ContactForm_username__kUSrl",N="ContactForm_name__ZqciK",w="ContactForm_form__dhl+T",k="ContactForm_label__-cVXI",F="ContactForm_input__Bl93P",L="ContactForm_button__eSwX9",E=function(){var t=(0,Z.a)().user,e=(0,r.useState)(""),n=(0,C.Z)(e,2),a=n[0],s=n[1],o=(0,r.useState)(""),u=(0,C.Z)(o,2),i=u[0],l=u[1],d=(0,c.I0)(),m=(0,c.v9)((function(t){return t.contacts.contacts})),f=function(t){var e=t.target,n=e.name,a=e.value;switch(n){case"name":s(a);break;case"number":l(a);break;default:return}};return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("p",{className:y,children:["Welcome, ",(0,j.jsx)("span",{className:N,children:t.name})," !"]}),(0,j.jsxs)("form",{className:w,onSubmit:function(t){t.preventDefault();var e=a.toLowerCase();m.some((function(t){return t.name.toLocaleLowerCase()===e}))?alert("".concat(a," is already in contacts.")):(d(x({name:a,number:i})),s(""),l(""))},children:[(0,j.jsxs)("label",{className:k,children:["Name",(0,j.jsx)("input",{className:F,onChange:f,value:a,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",required:!0})]}),(0,j.jsxs)("label",{className:k,children:["Number",(0,j.jsx)("input",{className:F,onChange:f,value:i,type:"tel",name:"number",pattern:"\\+?\\d{1,4}?[-.\\s]?\\(?\\d{1,3}?\\)?[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,4}[-.\\s]?\\d{1,9}",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0})]}),(0,j.jsx)("button",{className:L,type:"submit",children:"Add contact"})]})]})},S="Filter_box__d3XyP",A="Filter_label__vEd1E",q="Filter_input__N7T3z",z=n(942),I=n(273),W=function(t){t.isLoading=!0},P=function(t,e){t.isLoading=!1,t.error=e.payload},V=((0,h.oM)({name:"contacts",initialState:{contacts:[],filter:"",loading:!1,error:null},reducers:{filteredContact:function(t,e){t.filter=e.payload}},extraReducers:(a={},(0,z.Z)(a,b.pending,W),(0,z.Z)(a,x.pending,W),(0,z.Z)(a,v.pending,W),(0,z.Z)(a,b.rejected,P),(0,z.Z)(a,x.rejected,P),(0,z.Z)(a,v.rejected,P),(0,z.Z)(a,b.fulfilled,(function(t,e){t.loading=!1,t.error=null,t.contacts=e.payload})),(0,z.Z)(a,x.fulfilled,(function(t,e){t.loading=!1,t.error=null,t.contacts.push(e.payload)})),(0,z.Z)(a,v.fulfilled,(function(t,e){t.loading=!1,t.error=null,t.contacts=t.contacts.filter((function(t){return t.id!==e.payload}))})),(0,z.Z)(a,I.ni.fulfilled,(function(t){t.items=[],t.error=null,t.isLoading=!1})),a)}).reducer,(0,h.PH)("contacts/filteredContact",(function(t){return{payload:t}}))),X=function(){var t=(0,c.I0)();return(0,j.jsx)("div",{className:S,children:(0,j.jsxs)("label",{className:A,children:["Find contacts by name",(0,j.jsx)("input",{className:q,type:"text",name:"filter",onChange:function(e){t(V(e.target.value))},placeholder:"Search contact"})]})})},B=function(t){return t.contacts.loading};function D(){var t=(0,c.I0)(),e=(0,c.v9)(B);return(0,r.useEffect)((function(){t(b())}),[t]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(s.q,{children:(0,j.jsx)("title",{children:"Your contacts"})}),(0,j.jsx)(E,{}),(0,j.jsx)("div",{style:{color:"#f2e9e4"},children:e&&"Request in progress..."}),(0,j.jsx)(X,{}),(0,j.jsx)(g,{})]})}}}]);
//# sourceMappingURL=163.73bd5e59.chunk.js.map